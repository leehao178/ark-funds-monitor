{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Danny\\\\Documents\\\\GitHub\\\\ark-funds-monitor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Danny\\\\Documents\\\\GitHub\\\\ark-funds-monitor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Danny\\\\Documents\\\\GitHub\\\\ark-funds-monitor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Danny\\\\Documents\\\\GitHub\\\\ark-funds-monitor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{CircularProgress}from'@material-ui/core';import*as Consts from'../../../shared/constants';import{tickerService}from'../../../services/generic-service';import{dateService}from'../../../services/date-service';import'./company-news.scss';import NewsCard from'./news-card/news-card';var CompanyNews=/*#__PURE__*/function(_React$Component){_inherits(CompanyNews,_React$Component);var _super=_createSuper(CompanyNews);function CompanyNews(props){var _this;_classCallCheck(this,CompanyNews);_this=_super.call(this,props);_this.state={isLoading:false,ticker:'',news:[]};_this.props=props;return _this;}_createClass(CompanyNews,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.tickerSubscription=tickerService.getTicker().subscribe(function(ticker){if(ticker){_this2.setState({ticker:ticker});_this2.getCompanyNews(ticker);}else{_this2.setState({ticker:''});}});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.tickerSubscription.unsubscribe();}},{key:\"getCompanyNews\",value:function getCompanyNews(ticker){var _this3=this;this.setState({isLoading:true});var apiParams={symbol:ticker,from:dateService.getDateStrOfDateRange(365),to:dateService.getDateStrOfDateRange(0),token:Consts.token};var paramsArray=[];for(var prop in apiParams){paramsArray.push(\"\".concat(prop,\"=\").concat(apiParams[prop]));}var getCompanyNewsUrl=Consts.getCompanyNewsUrl+paramsArray.join('&');fetch(getCompanyNewsUrl,{method:'GET'}).then(function(response){return response.json();}).then(function(data){if(data){_this3.setState({news:data.splice(0,9)});}_this3.setState({isLoading:false});}).catch(function(error){return _this3.setState({error:error});});}},{key:\"render\",value:function render(){var subComponent;if(this.state.isLoading===true){subComponent=/*#__PURE__*/React.createElement(\"div\",{className:\"loader-wrapper\"},/*#__PURE__*/React.createElement(CircularProgress,null));}else{subComponent=/*#__PURE__*/React.createElement(\"div\",null,this.state.news.map(function(element){return/*#__PURE__*/React.createElement(NewsCard,{key:element.id,newsDetails:element});}));}return/*#__PURE__*/React.createElement(\"div\",null,subComponent);}}]);return CompanyNews;}(React.Component);;export default CompanyNews;","map":{"version":3,"sources":["C:/Users/Danny/Documents/GitHub/ark-funds-monitor/src/components/stock-details/company-news/company-news.js"],"names":["React","CircularProgress","Consts","tickerService","dateService","NewsCard","CompanyNews","props","state","isLoading","ticker","news","tickerSubscription","getTicker","subscribe","setState","getCompanyNews","unsubscribe","apiParams","symbol","from","getDateStrOfDateRange","to","token","paramsArray","prop","push","getCompanyNewsUrl","join","fetch","method","then","response","json","data","splice","catch","error","subComponent","map","element","id","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nimport * as Consts from '../../../shared/constants';\r\nimport { tickerService } from '../../../services/generic-service';\r\nimport { dateService } from '../../../services/date-service';\r\nimport './company-news.scss';\r\nimport NewsCard from './news-card/news-card'\r\n\r\nclass CompanyNews extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoading: false,\r\n            ticker: '',\r\n            news: []\r\n        };\r\n        this.props = props;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.tickerSubscription = tickerService.getTicker().subscribe(ticker => {\r\n            if (ticker) {\r\n                this.setState({ ticker: ticker });\r\n                this.getCompanyNews(ticker);\r\n            } else {\r\n                this.setState({ ticker: '' });\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.tickerSubscription.unsubscribe();\r\n    }\r\n\r\n    getCompanyNews(ticker) {\r\n        this.setState({ isLoading: true });\r\n\r\n        const apiParams = {\r\n            symbol: ticker,\r\n            from: dateService.getDateStrOfDateRange(365),\r\n            to: dateService.getDateStrOfDateRange(0),\r\n            token: Consts.token\r\n        };\r\n\r\n        let paramsArray = [];\r\n        for (let prop in apiParams) {\r\n            paramsArray.push(`${prop}=${apiParams[prop]}`);\r\n        }\r\n        let getCompanyNewsUrl = Consts.getCompanyNewsUrl + paramsArray.join('&');\r\n\r\n        fetch(getCompanyNewsUrl, {\r\n            method: 'GET'\r\n        })\r\n            .then(response => response.json())\r\n            .then((data) => {\r\n                if (data) {\r\n                    this.setState({ news: data.splice(0, 9)});\r\n                }\r\n                this.setState({ isLoading: false });\r\n            })\r\n            .catch(error => this.setState({ error }));\r\n    }\r\n\r\n    render() {\r\n        let subComponent;\r\n        if (this.state.isLoading === true) {\r\n            subComponent =\r\n                <div className='loader-wrapper'>\r\n                    <CircularProgress />\r\n                </div>\r\n        } else {\r\n            subComponent =\r\n                <div>\r\n                    {this.state.news.map(element =>\r\n                        <NewsCard key={element.id} newsDetails={element} />\r\n                    )}\r\n                </div>\r\n        }\r\n        return (\r\n            <div>\r\n                {subComponent}\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CompanyNews;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}